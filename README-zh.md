# Notion-Obsidian 同步插件

一个强大的 Obsidian 插件，可将 Notion 数据库同步到 Obsidian 文件夹，支持全面的字段映射和一键同步功能。

**中文文档** | **[English Documentation](README.md)**

---

## 🌟 功能特点

- **🔄 一键同步**: 一个按钮同步所有启用的配置
- **📊 完整字段映射**: 支持所有 Notion 属性类型，包括关联字段
- **🎯 多配置支持**: 配置多个数据库-文件夹同步对
- **⚡ 智能属性转换**: 自动和自定义字段映射选项
- **🔗 关联字段支持**: 获取关联数据库的实际页面标题
- **📝 可视化配置**: 用户友好的数据库和文件夹选择界面
- **🛡️ 错误处理**: 全面的错误处理和详细反馈
- **🌐 网络优化**: 使用 Obsidian 原生网络请求，兼容性更好

## 🚀 当前状态

**✅ 已完全实现：Notion → Obsidian 同步**
- 从 Notion 数据库到 Obsidian 文件夹的完整同步
- 支持所有 Notion 属性类型
- 字段映射配置
- 多同步配置支持

**🚧 即将推出：**
- Obsidian → Notion 同步
- 双向同步 (Notion ↔ Obsidian)


## 🛠️ 安装方法

### 手动安装

1. 从 GitHub 下载最新版本
2. 解压文件到 vault 的 `.obsidian/plugins/notion-obsidian-sync/` 文件夹
3. 重新加载 Obsidian
4. 在设置 → 第三方插件中启用插件

### 从源码安装

```bash
# 克隆仓库
git clone https://github.com/Sherryyue24/notion-obsidian-sync.git
cd notion-obsidian-sync

# 安装依赖
npm install

# 构建插件
npm run build
```

## ⚙️ 设置指南

### 1. 获取 Notion API Token

1. 访问 [Notion 开发者页面](https://developers.notion.com/)
2. 创建新的集成
3. 复制"内部集成令牌"
4. 将数据库分享给集成：
   - 打开你的 Notion 数据库
   - 点击"..." → "添加连接"
   - 选择你的集成

### 2. 配置插件

1. 打开 Obsidian 设置 → 第三方插件 → Notion Sync
2. 输入你的 Notion API token
3. 点击"验证令牌"测试连接

### 3. 创建同步配置

**快速设置：**
1. 输入配置名称
2. 从下拉菜单选择 Notion 数据库
3. 选择 Obsidian 文件夹
4. 点击"创建快速同步"

**高级设置：**
1. 点击"高级设置"获取更多选项
2. 配置字段映射
3. 设置同步偏好
4. 保存配置

## 🎮 使用方法

### 一键同步所有
- 在设置中点击"🔄 Sync All"按钮
- 所有启用的配置将自动同步
- 实时进度通知

### 单独同步
- 每个配置都有自己的"🔄 Sync"按钮
- 同步特定的数据库-文件夹对
- 查看每个配置的最后同步时间

### 字段映射配置
1. 在配置中选择数据库
2. 点击"配置字段映射"
3. 选择要同步的 Notion 属性
4. 映射到对应的 Obsidian 属性
5. 选择合适的数据类型

## 🔧 高级功能

### 智能字段映射
- 自动属性名建议
- 中文到英文名称转换
- 类型适配的映射推荐

### 关联字段支持
- 获取实际页面标题而非 ID
- 处理跨数据库关联
- 需要适当的集成权限

### 错误处理
- 详细的错误消息
- 网络连接检查
- 权限问题指导

## 📊 同步流程

1. **数据库扫描**：从 Notion 数据库检索所有页面
2. **属性转换**：将 Notion 属性转换为 Obsidian frontmatter
3. **文件管理**：在目标文件夹中创建或更新 Markdown 文件
4. **时间戳跟踪**：记录同步时间和修改日期
5. **进度反馈**：显示实时同步状态

## 🚨 故障排除

### 常见问题

**"获取失败"错误：**
- 检查网络连接
- 验证 Notion API token
- 确保数据库权限

**关联字段不显示：**
- 为集成授予相关数据库的访问权限
- 检查 Notion 中的连接权限

**同步失败：**
- 查看通知中的错误消息
- 检查控制台日志获取详细信息
- 验证 Obsidian 中的文件夹权限


## 📄 许可证

MIT 许可证 - 详见 [LICENSE](LICENSE) 文件。
